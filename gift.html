<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>M√≥n qu√† Gi√°ng Sinh ‚Äî M·ªü qu√†</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="gift-page">
    <canvas id="snow-canvas" aria-hidden="true"></canvas>

    <header class="site-header">
      <div class="wrap">
        <div class="brand">üéÅ M·ªü qu√†</div>
        <nav>
          <a href="index.html">Trang ch·ªß</a>
        </nav>
      </div>
    </header>

    <main class="gift-main">
      <div class="wrap">
        <h1>M√≥n qu√† d√†nh cho <span id="recipient-name">Em</span></h1>
        <p class="hint">Ch·∫°m v√†o phong b√¨ ƒë·ªÉ m·ªü üíå</p>

        <div id="envelope" class="envelope" role="button" aria-label="M·ªü th∆∞" tabindex="0">
          <div class="flap"></div>
          <div class="letter">
            <div class="letter-content" id="letter-content"></div>
          </div>
          <div class="seal">üíñ</div>
        </div>

        <div class="gift-actions">
          <button id="replay" class="btn btn-secondary">Xem l·∫°i hi·ªáu ·ª©ng</button>
          <a href="index.html" class="btn btn-primary">Quay l·∫°i</a>
        </div>
      </div>
    </main>

    <div id="hearts-container" aria-hidden="true"></div>

    <footer class="site-footer">
      <div class="wrap">
        <small>Merry Christmas ‚Ä¢ With love</small>
      </div>
    </footer>

    <div id="music-bar" class="music-bar" aria-live="polite">
      <button id="music-toggle" class="btn btn-secondary">üéµ Ph√°t</button>
      <input id="music-volume" type="range" min="0" max="1" step="0.05" value="0.6" aria-label="√Çm l∆∞·ª£ng nh·∫°c" />
      <div id="yt-player" class="yt-player" aria-hidden="true"></div>
    </div>

    <script src="config.js"></script>
    <script src="script.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const envelope = document.getElementById('envelope');
        const letterContent = document.getElementById('letter-content');
        const replayBtn = document.getElementById('replay');
        const recipientEl = document.getElementById('recipient-name');

        try {
          recipientEl.textContent = (window.GIFT_CONFIG?.recipientName) || 'Em';
          letterContent.innerHTML = (window.GIFT_CONFIG?.specialMessage || 'G·ª≠i em, ch√∫c em m·ªôt m√πa Gi√°ng Sinh th·∫≠t an l√†nh v√† ·∫•m √°p!');
        } catch (e) {}

        const open = () => {
          envelope.classList.add('open');
          startHeartConfetti();
        };

        envelope.addEventListener('click', open);
        envelope.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); open(); }
        });
        replayBtn.addEventListener('click', () => {
          envelope.classList.remove('open');
          void envelope.offsetWidth; // reflow to restart CSS animation
          startHeartConfetti();
        });
      });
    </script>
  </body>
</html>
